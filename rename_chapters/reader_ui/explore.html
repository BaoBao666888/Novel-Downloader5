<!doctype html>
<html lang="vi">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Khám phá nguồn vBook</title>
  <script>
    (() => {
      const SETTINGS_KEY = "reader.ui.settings.v3";
      const THEME_KEY = "reader.ui.theme.cache.v1";
      const defaults = {
        fontFamily: "'Noto Serif', 'Palatino Linotype', 'Times New Roman', serif",
        fontSize: 21,
        lineHeight: 1.9,
        paragraphSpacing: 1.1,
        textAlign: "justify",
        panelTransparency: "clear",
        starStyle: "classic",
        backgroundMotion: "on",
      };
      const fallbackTheme = {
        effect: "stars",
        tokens: {
          bg: "#090a1a",
          bg2: "#111433",
          surface: "#11162d",
          surface_alt: "#151f42",
          text: "#eaf2ff",
          muted: "#8ca3d4",
          accent: "#77b8ff",
          glow: "#9fd0ff",
          particle: "#ffffff",
        },
      };
      const root = document.documentElement;
      root.classList.add("theme-booting");
      let settings = { ...defaults };
      let theme = fallbackTheme;
      try {
        const rawSettings = localStorage.getItem(SETTINGS_KEY);
        if (rawSettings) settings = { ...defaults, ...JSON.parse(rawSettings) };
      } catch {}
      try {
        const rawTheme = localStorage.getItem(THEME_KEY);
        if (rawTheme) {
          const parsed = JSON.parse(rawTheme);
          if (parsed && parsed.tokens) theme = parsed;
        }
      } catch {}
      for (const [key, value] of Object.entries(theme.tokens || {})) {
        root.style.setProperty(`--${String(key).split("_").join("-")}`, value);
      }
      root.style.setProperty("--reader-font-family", settings.fontFamily);
      root.style.setProperty("--reader-font-size", `${settings.fontSize}px`);
      root.style.setProperty("--reader-line-height", `${settings.lineHeight}`);
      root.style.setProperty("--reader-paragraph-spacing", `${settings.paragraphSpacing}em`);
      root.style.setProperty("--reader-text-align", settings.textAlign);
      const effects = ["effect-stars", "effect-sparkle", "effect-bubbles", "effect-leaves", "effect-snow"];
      const stars = ["star-style-classic", "star-style-dense", "star-style-bling"];
      const panelStyles = ["panel-style-clear", "panel-style-balanced", "panel-style-solid"];
      root.classList.remove(...effects, ...stars);
      root.classList.add(`effect-${theme.effect || "stars"}`);
      root.classList.add(`star-style-${settings.starStyle || "classic"}`);
      root.classList.remove(...panelStyles);
      root.classList.add(`panel-style-${settings.panelTransparency || "clear"}`);
      root.classList.toggle("effects-paused", (settings.backgroundMotion || "on") !== "on");
    })();
  </script>
  <link rel="stylesheet" href="./styles.css?v=20260220-vb10">
</head>
<body data-page="explore" class="mpa-body">
  <script>
    (() => {
      const root = document.documentElement;
      const body = document.body;
      const effects = ["effect-stars", "effect-sparkle", "effect-bubbles", "effect-leaves", "effect-snow"];
      const stars = ["star-style-classic", "star-style-dense", "star-style-bling"];
      const panelStyles = ["panel-style-clear", "panel-style-balanced", "panel-style-solid"];
      body.classList.remove(...effects, ...stars, ...panelStyles);
      for (const cls of [...effects, ...stars, ...panelStyles]) {
        if (root.classList.contains(cls)) body.classList.add(cls);
      }
      body.classList.toggle("effects-paused", root.classList.contains("effects-paused"));
      body.classList.toggle("effects-lite", root.classList.contains("effects-lite"));
      root.classList.remove("theme-booting");
    })();
  </script>

  <div id="fx-layer" aria-hidden="true"></div>

  <header class="topbar sticky-topbar">
    <div class="brand">
      <h1 id="app-title"></h1>
      <p id="app-subtitle"></p>
    </div>
    <nav class="nav-tabs" aria-label="Điều hướng trang">
      <a id="nav-library" class="tab-btn" href="/library"></a>
      <a id="nav-search" class="tab-btn" href="/search"></a>
      <a id="nav-explore" class="tab-btn" href="/explore"></a>
    </nav>
    <div class="topbar-actions">
      <input id="search-input" type="search" autocomplete="off">
      <button id="btn-go-search" class="btn" type="button"></button>
      <button id="btn-clear-cache" class="btn" type="button"></button>
      <button id="btn-open-settings" class="btn" type="button"></button>
    </div>
  </header>

  <div id="status-inline" class="status-inline" role="status" aria-live="polite" aria-busy="false"></div>

  <main class="pages single-main one-col">
    <section class="panel search-online-panel">
      <div class="panel-head">
        <h2 id="explore-title"></h2>
        <span id="explore-meta" class="tag"></span>
      </div>
      <div class="search-online-controls">
        <label>
          <span id="vbook-plugin-label"></span>
          <select id="vbook-plugin-select"></select>
        </label>
        <div class="search-online-actions">
          <button id="btn-vbook-search-run" class="btn" type="button"></button>
          <button id="btn-vbook-search-reset" class="btn" type="button"></button>
          <button id="btn-explore-toggle-plugin" class="btn" type="button"></button>
          <button id="btn-explore-load-home" class="btn" type="button"></button>
          <button id="btn-explore-load-genre" class="btn" type="button"></button>
        </div>
      </div>
    </section>

    <section id="explore-plugin-panel" class="panel hidden">
      <div class="panel-head">
        <h2 id="explore-plugin-title"></h2>
        <span id="explore-plugin-version" class="tag"></span>
      </div>
      <div class="book-meta-wrap">
        <div class="book-view-grid">
          <article class="book-info-item">
            <h4 id="explore-plugin-author-label"></h4>
            <p id="explore-plugin-author-value"></p>
          </article>
          <article class="book-info-item">
            <h4 id="explore-plugin-type-label"></h4>
            <p id="explore-plugin-type-value"></p>
          </article>
          <article class="book-info-item">
            <h4 id="explore-plugin-locale-label"></h4>
            <p id="explore-plugin-locale-value"></p>
          </article>
          <article class="book-info-item">
            <h4 id="explore-plugin-source-label"></h4>
            <p id="explore-plugin-source-value"></p>
          </article>
          <article class="book-info-item book-info-item-wide">
            <h4 id="explore-plugin-description-label"></h4>
            <p id="explore-plugin-description-value"></p>
          </article>
        </div>

        <div class="vbook-runtime-pane">
          <div class="panel-head">
            <h4 id="explore-plugin-settings-title"></h4>
            <span id="explore-plugin-settings-effective" class="tag"></span>
          </div>
          <div class="vbook-runtime-grid">
            <label>
              <span id="explore-plugin-delay-label"></span>
              <input id="explore-plugin-delay-input" type="number" min="0" max="15000" step="50">
            </label>
            <label>
              <span id="explore-plugin-threads-label"></span>
              <input id="explore-plugin-threads-input" type="number" min="1" max="16" step="1">
            </label>
            <label>
              <span id="explore-plugin-prefetch-label"></span>
              <input id="explore-plugin-prefetch-input" type="number" min="0" max="50" step="1">
            </label>
            <label class="vbook-runtime-wide">
              <span id="explore-plugin-supplemental-label"></span>
              <textarea id="explore-plugin-supplemental-input"></textarea>
            </label>
          </div>
          <p id="explore-plugin-settings-hint" class="book-card-meta"></p>
          <div class="settings-actions">
            <button id="btn-explore-plugin-settings-load" class="btn btn-small" type="button"></button>
            <button id="btn-explore-plugin-settings-save" class="btn btn-small btn-primary" type="button"></button>
            <button id="btn-explore-plugin-settings-clear" class="btn btn-small" type="button"></button>
          </div>
        </div>
      </div>
    </section>

    <section class="panel">
      <div class="panel-head">
        <h2 id="explore-home-title"></h2>
        <span id="explore-home-count" class="tag"></span>
      </div>
      <ul id="explore-home-tabs" class="explore-tab-list"></ul>
      <div id="explore-home-grid" class="library-grid"></div>
      <p id="explore-home-empty" class="empty-text"></p>
      <div class="toc-footer">
        <button id="btn-explore-home-prev" class="btn btn-small" type="button"></button>
        <span id="explore-home-page" class="tag"></span>
        <button id="btn-explore-home-next" class="btn btn-small" type="button"></button>
      </div>
    </section>

    <section class="panel">
      <div class="panel-head">
        <h2 id="explore-genre-title"></h2>
        <span id="explore-genre-count" class="tag"></span>
      </div>
      <ul id="explore-genre-tabs" class="explore-tab-list"></ul>
      <div id="explore-genre-grid" class="library-grid"></div>
      <p id="explore-genre-empty" class="empty-text"></p>
      <div class="toc-footer">
        <button id="btn-explore-genre-prev" class="btn btn-small" type="button"></button>
        <span id="explore-genre-page" class="tag"></span>
        <button id="btn-explore-genre-next" class="btn btn-small" type="button"></button>
      </div>
    </section>

    <section class="panel">
      <div class="panel-head">
        <h2 id="explore-search-title"></h2>
        <span id="explore-search-count" class="tag"></span>
      </div>
      <div id="explore-search-grid" class="library-grid"></div>
      <p id="explore-search-empty" class="empty-text"></p>
      <div class="toc-footer">
        <button id="btn-explore-search-prev" class="btn btn-small" type="button"></button>
        <span id="explore-search-page" class="tag"></span>
        <button id="btn-explore-search-next" class="btn btn-small" type="button"></button>
      </div>
    </section>
  </main>

  <dialog id="vbook-detail-dialog" class="dialog vbook-detail-dialog">
    <div class="dialog-head">
      <h3 id="vbook-detail-dialog-title"></h3>
      <button id="btn-vbook-detail-close" class="btn btn-small" type="button"></button>
    </div>
    <p id="vbook-detail-subtitle" class="dialog-subtitle"></p>

    <section class="vbook-detail-hero">
      <div id="vbook-detail-cover" class="vbook-detail-cover"></div>
      <div class="vbook-detail-meta">
        <h4 id="vbook-detail-title"></h4>
        <p id="vbook-detail-author" class="book-card-meta"></p>
        <p id="vbook-detail-status" class="book-card-source"></p>
        <p id="vbook-detail-desc" class="vbook-detail-desc"></p>
        <div class="meta-actions">
          <button id="btn-vbook-detail-load-toc" class="btn" type="button"></button>
          <button id="btn-vbook-detail-import" class="btn btn-primary" type="button"></button>
          <button id="btn-vbook-detail-read-now" class="btn btn-primary" type="button"></button>
        </div>
      </div>
    </section>

    <section class="vbook-detail-genres-wrap">
      <div class="panel-head">
        <h4 id="vbook-detail-genres-title"></h4>
      </div>
      <div id="vbook-detail-genres-list" class="vbook-detail-tag-list"></div>
      <p id="vbook-detail-genres-empty" class="empty-text"></p>
    </section>

    <section class="vbook-detail-extra-wrap">
      <div class="panel-head">
        <h4 id="vbook-detail-extra-title"></h4>
      </div>
      <div id="vbook-detail-extra-list" class="vbook-detail-extra-list"></div>
      <p id="vbook-detail-extra-empty" class="empty-text"></p>
    </section>

    <section class="vbook-detail-suggest-wrap">
      <div class="panel-head">
        <h4 id="vbook-detail-suggest-title"></h4>
        <span id="vbook-detail-suggest-count" class="tag"></span>
      </div>
      <ul id="vbook-detail-suggest-list" class="simple-list vbook-detail-suggest-list"></ul>
      <p id="vbook-detail-suggest-empty" class="empty-text"></p>
    </section>

    <section class="vbook-detail-comment-wrap">
      <div class="panel-head">
        <h4 id="vbook-detail-comment-title"></h4>
        <span id="vbook-detail-comment-count" class="tag"></span>
      </div>
      <ul id="vbook-detail-comment-list" class="simple-list vbook-detail-comment-list"></ul>
      <p id="vbook-detail-comment-empty" class="empty-text"></p>
    </section>

    <section class="vbook-detail-toc-wrap">
      <div class="panel-head">
        <h4 id="vbook-detail-toc-title"></h4>
        <div class="toc-head-actions">
          <button id="btn-vbook-toc-reverse" class="btn btn-small" type="button"></button>
        </div>
      </div>
      <ul id="vbook-detail-toc-list" class="simple-list vbook-detail-toc-list"></ul>
      <p id="vbook-detail-toc-empty" class="empty-text"></p>
    </section>
  </dialog>

  <dialog id="vbook-genre-dialog" class="dialog vbook-genre-dialog">
    <div class="dialog-head">
      <h3 id="vbook-genre-dialog-title"></h3>
      <button id="btn-vbook-genre-close" class="btn btn-small" type="button"></button>
    </div>
    <p id="vbook-genre-dialog-subtitle" class="dialog-subtitle"></p>
    <div id="vbook-genre-grid" class="library-grid"></div>
    <p id="vbook-genre-empty" class="empty-text"></p>
  </dialog>

  <aside id="settings-drawer" class="settings-drawer" aria-hidden="true">
    <div class="settings-head">
      <h3 id="settings-title"></h3>
      <button id="btn-close-settings" class="btn btn-small" type="button"></button>
    </div>
    <form id="settings-form" class="settings-form">
      <label><span id="label-theme"></span><select id="theme-select"></select></label>
      <label><span id="label-panel-transparency"></span><select id="panel-transparency-select"><option id="panel-clear" value="clear"></option><option id="panel-balanced" value="balanced"></option><option id="panel-solid" value="solid"></option></select></label>
      <label><span id="label-font-family"></span><select id="font-family-select"></select></label>
      <label><span id="label-star-style"></span><select id="star-style-select"><option id="star-style-classic" value="classic"></option><option id="star-style-dense" value="dense"></option><option id="star-style-bling" value="bling"></option></select></label>
      <label><span id="label-background-motion"></span><select id="background-motion-select"><option id="motion-on" value="on"></option><option id="motion-off" value="off"></option></select></label>
      <label><span id="label-font-size"></span><input id="font-size-input" type="range" min="15" max="36" step="1"><small id="font-size-value"></small></label>
      <label><span id="label-text-align"></span><select id="text-align-select"><option id="align-justify" value="justify">Đều hai bên</option><option id="align-left" value="left">Canh trái</option><option id="align-center" value="center">Canh giữa</option></select></label>
      <label><span id="label-line-height"></span><input id="line-height-input" type="range" min="1.2" max="2.6" step="0.05"><small id="line-height-value"></small></label>
      <label><span id="label-paragraph-spacing"></span><input id="paragraph-spacing-input" type="range" min="0.2" max="2.2" step="0.05"><small id="paragraph-spacing-value"></small></label>
      <label><span id="label-reading-mode"></span><select id="reading-mode-select"><option id="mode-flip" value="flip"></option><option id="mode-horizontal" value="horizontal"></option><option id="mode-vertical" value="vertical"></option><option id="mode-hybrid" value="hybrid"></option></select></label>
      <label><span id="label-mini-bars-enabled"></span><select id="mini-bars-enabled-select"><option id="mini-bars-on" value="on"></option><option id="mini-bars-off" value="off"></option></select></label>
      <div class="settings-actions"><button id="btn-save-settings" class="btn btn-primary" type="submit"></button><button id="btn-reset-settings" class="btn" type="button"></button></div>
    </form>
  </aside>
  <div id="settings-backdrop" class="settings-backdrop" hidden></div>

  <div id="toast" class="toast" role="status" aria-live="polite"></div>

  <script type="module" src="./js/pages/explore_page.js?v=20260220-vb11"></script>
</body>
</html>
